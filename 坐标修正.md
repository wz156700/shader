# shader 中的坐标系修正

## 前言

我们之前提到过——`坐标修正`的概念。但只是一笔带过。今天我们来详细了解下`坐标修正`方面的东西。画布多说，直接开始。

## 什么是坐标修正

我们在前面的文章的 shader 编写中，都进行了`坐标修正`。即以下代码：

```
    vec2 uv =fragCoord/iResolution.xy; //坐标除以画布大小得到归一化uv坐标
    // uv 居中
    uv=(uv*2.)-1.0;
    uv.x*=iResolution.x/iResolution.y; // 修正uv坐标未自动适应画布比例的问题
```

从代码中，我们不难看出，我们进行了以下操作：

1. 得到 uv 坐标，uv 坐标的范围为[0-1]
2. 将 uv 坐标系的原点移到中心点[0.5,0.5]
3. 修正坐标系的比例

所以，我们可以知道，`坐标修正`即是对坐标系进行以上三个步骤。

## 详解`坐标修真`

我们接下来详细解释下，为何上述三步可以达到`坐标修正`的目的？

### uv 坐标

uv 坐标：`输入坐标fragCoord除以画布大小iResolution.xy，我们就能得到一个归一化的坐标，把它命名为uv`,所以，我们使用` vec2 uv =fragCoord/iResolution.xy;`可以得到我们的 uv 坐标，x,y 的范围都在[0,1]之间。

以下为 uv 坐标可视化的图片：

[图片]

### 原点居中

我们先来看原点未居中的 uv 的图片：

[图片]

再来看看我们原点居中了的 uv 的图片：

[图片]

为何`uv=(uv*2.)-1.0`能实现原点居中的效果呢？我们来仔细分析下：

1. `uv*2.0`——我们的 uv 范围变成了[0,2]
2. `(uv*2.)-1.0`——我们的 uv 范围变成了[-1,1],这时候，我们的原点在(0,0)点，并且（0，0）点为中心点

### 画布比例修正

画布比例修正：`uv.x*=iResolution.x/iResolution.y;`，是三步中相对最难理解的点。我将会画图解释，希望讲解清楚。

#### 我们为什么要进行画布比列修正呢？

当我们在一个 16：9 的屏幕上使用 shader 绘制一个圆：

[图片]

为什么会这样呢？——`这是因为我们画布的宽高不相等，所以，我们x轴和y轴上的一个单位代表的长度不一样`
